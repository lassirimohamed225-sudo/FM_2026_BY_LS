<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LASSIRI MASTER 2026</title>
    <style>
        :root { --gold: #f1c40f; --dark: #000408; --blue: #1e40af; --light: #60a5fa; --card: #0f172a; --text: #ffffff; --green: #22c55e; --red: #ef4444; }
        body { margin:0; background:var(--dark); color:var(--text); font-family: 'Segoe UI', sans-serif; font-weight: 900; overflow:hidden; }
        
        .overlay { position:fixed; inset:0; background:var(--dark); z-index:10000; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:20px; text-align:center; }
        input, select { width:90%; padding:15px; font-size:18px; margin:8px 0; border-radius:12px; border:3px solid var(--blue); background:#1e293b; color:white; }

        .header { background: var(--blue); padding:10px; border-bottom:4px solid var(--gold); display:grid; grid-template-columns: repeat(3, 1fr); gap:8px; text-align:center; }
        .stat-item { background: rgba(0,0,0,0.6); padding: 5px; border-radius: 10px; border: 2px solid var(--gold); }
        .stat-item span { font-size:11px; color:#cbd5e1; display:block; }
        .stat-item b { font-size:16px; color:var(--gold); }

        #match-screen, #offer-screen, #recap-screen { position:fixed; inset:0; z-index:9000; display:none; flex-direction:column; padding:20px; text-align:center; }
        #match-screen { background:radial-gradient(circle, #064e3b, #022c22); }
        #offer-screen, #recap-screen { background: rgba(0,0,0,0.95); justify-content: center; z-index: 10001; }

        .scoreboard { background:rgba(0,0,0,0.9); padding:15px; border-radius:20px; border:3px solid var(--gold); display:flex; justify-content:space-around; align-items:center; font-size:18px; }
        #live-events { flex:1; overflow-y:auto; margin-top:15px; background:rgba(0,0,0,0.4); border-radius:15px; padding:15px; font-size:18px; text-align:right; }

        .main-content { height:calc(100vh - 200px); overflow-y:auto; padding:15px; padding-bottom:110px; }
        .screen { display:none; }
        .active { display:block !important; }

        .card { background: var(--card); border-radius:18px; padding:18px; margin-bottom:15px; border: 3px solid var(--light); position: relative; }
        .btn { background:var(--blue); color:white; border:3px solid white; padding:14px; border-radius:12px; cursor:pointer; font-weight:bold; width:100%; margin:5px 0; font-size:20px; }
        .btn-gold { background:var(--gold); color:black; border:none; }

        .player-card { display: flex; align-items: center; gap: 15px; background: #1e293b; padding: 10px; border-radius: 15px; border: 2px solid var(--gold); margin-bottom: 10px; }
        .player-img { width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--gold); object-fit: cover; background: #000; }

        .navbar { position:fixed; bottom:0; width:100%; height:90px; background: var(--card); display:flex; justify-content:space-around; align-items:center; border-top: 4px solid var(--blue); z-index: 1000; }
        .nav-link { color:#94a3b8; font-size:14px; cursor:pointer; font-weight:bold; }
        .active-link { color:var(--gold) !important; border-top: 4px solid var(--gold); }

        table { width:100%; border-collapse:collapse; font-size:14px; }
        th { color:var(--gold); border-bottom:2px solid var(--blue); padding:8px; }
        td { padding:8px; border-bottom:1px solid #1e293b; text-align:center; }
        .recap-item { background: #1e293b; margin: 5px 0; padding: 10px; border-radius: 8px; display: flex; justify-content: space-between; border-left: 5px solid var(--gold); }
    </style>
</head>
<body>

<div id="offer-screen">
    <div class="card" style="border-color:var(--gold);">
        <h2 style="color:var(--gold)">ğŸ—ï¸ Ø¹Ø±Ø¶ Ø§Ø­ØªØ±Ø§Ù Ø±Ø³Ù…ÙŠ!</h2>
        <p id="offer-text" style="font-size:20px;"></p>
        <button class="btn btn-gold" onclick="Game.acceptOffer()">âœ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø¹Ø±Ø¶</button>
        <button class="btn" style="background:var(--red)" onclick="Game.rejectOffer()">âŒ Ø±ÙØ¶ ÙˆØ§Ù„Ø¨Ù‚Ø§Ø¡</button>
    </div>
</div>

<div id="recap-screen">
    <div class="card" style="border-color:var(--green);">
        <h2 style="color:var(--gold)">ğŸ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¬ÙˆÙ„Ø©</h2>
        <div id="recap-list"></div>
        <button class="btn btn-gold" onclick="Game.closeRecap()">Ù…ØªØ§Ø¨Ø¹Ø© Ù„Ù„Ù…Ù‚Ø± ğŸ </button>
    </div>
</div>

<div id="intro-screen" class="overlay">
    <h1 style="color:var(--gold); font-size:40px;">LASSIRI 2026</h1>
    <button class="btn btn-gold" style="width:250px;" onclick="Game.showSetup()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø© ğŸŸï¸</button>
</div>

<div id="setup-screen" class="overlay" style="display:none;">
    <h2 style="color:var(--gold)">Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø³ÙŠØ±Ø©</h2>
    <select id="select-mode">
        <option value="player">ğŸ‘¤ Ø·ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨</option>
        <option value="manager">ğŸ‘” Ø·ÙˆØ± Ø§Ù„Ù…Ø¯Ø±Ø¨</option>
    </select>
    <input type="text" id="user-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ">
    <select id="select-league" onchange="Game.loadTeams()">
        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆØ±ÙŠ</option>
        <option value="ENG">ğŸ´ó §ó ¢ó ¥Ù„Ù†Ø²ÙŠ</option>
        <option value="ESP">ğŸ‡ªğŸ‡¸ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠ</option>
        <option value="GER">ğŸ‡©ğŸ‡ª Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠ</option>
        <option value="ITA">ğŸ‡®ğŸ‡¹ Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠ</option>
        <option value="FRA">ğŸ‡«ğŸ‡· Ø§Ù„ÙØ±Ù†Ø³ÙŠ</option>
    </select>
    <select id="select-team"><option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ±ÙŠÙ‚</option></select>
    <button class="btn btn-gold" onclick="Game.start()">Ø¨Ø¯Ø¡ Ø§Ù„Ù…ÙˆØ³Ù… âœ…</button>
</div>

<div id="match-screen">
    <div class="scoreboard">
        <span id="m-home" style="color:var(--gold)">-</span> 
        <span id="m-score" style="font-size:30px; margin:0 10px;">0 - 0</span> 
        <span id="m-away">-</span>
        <span id="m-timer" style="background:red; padding:4px 8px; border-radius:6px; font-size:14px;">0'</span>
    </div>
    <div id="live-events" style="margin-top:10px;"></div>
    <button id="close-match" class="btn btn-gold" style="display:none;" onclick="Game.showRecap()">Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</button>
</div>

<div class="header">
    <div class="stat-item"><span>Ø§Ù„Ù‡ÙˆÙŠØ©</span><b id="ui-id">-</b></div>
    <div class="stat-item"><span>Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</span><b id="ui-money">-</b></div>
    <div class="stat-item"><span>Ø§Ù„Ø·Ø§Ù‚Ø©</span><b id="ui-trust">-</b></div>
</div>

<div class="main-content">
    <div id="sc-home" class="screen active">
        <div class="card">
            <h3>ğŸ  Ø§Ù„Ù†Ø§Ø¯ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ</h3>
            <p id="ui-status-desc"></p>
            <p style="color:var(--gold); font-size:18px;">Ø§Ù„Ø®ØµÙ…: <span id="ui-opponent" style="color:white;">-</span></p>
            <button class="btn btn-gold" onclick="Game.playMatch()">Ù„Ø¹Ø¨ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© âš½</button>
        </div>
        <div id="mgr-tools" style="display:none;" class="card">
            <button class="btn" onclick="Game.money += 100; Game.updateUI();">ğŸ’° Ø·Ù„Ø¨ Ø¯Ø¹Ù… 100M</button>
        </div>
    </div>

    <div id="sc-training" class="screen">
        <div class="card">
            <h3>ğŸ‹ï¸ Ø§Ù„ØªØ¯Ø±ÙŠØ¨</h3>
            <p>Ù…Ø³ØªÙˆØ§Ùƒ OVR: <b id="ui-ovr" style="color:var(--gold)">70</b></p>
            <button class="btn" onclick="Game.train(30, 0.5)">ğŸ’ª ØªØ¯Ø±ÙŠØ¨ Ø´Ø§Ù‚ (+0.5)</button>
            <button class="btn" style="background:var(--green)" onclick="Game.eat()">ğŸ• ÙˆØ¬Ø¨Ø© Ø·Ø§Ù‚Ø© (100$)</button>
        </div>
    </div>

    <div id="sc-market" class="screen">
        <div class="card"><h3>ğŸ›’ Ø³ÙˆÙ‚ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„Ø§Øª</h3><div id="market-list"></div></div>
    </div>

    <div id="sc-league" class="screen">
        <div class="card"><h3>ğŸ† Ø§Ù„ØªØ±ØªÙŠØ¨</h3><table id="league-table"></table></div>
    </div>
</div>

<div class="navbar">
    <div class="nav-link active-link" onclick="Game.nav('sc-home', this)">ğŸ  Ø§Ù„Ù†Ø§Ø¯ÙŠ</div>
    <div id="nav-train" class="nav-link" onclick="Game.nav('sc-training', this)">ğŸ‹ï¸ ØªØ¯Ø±ÙŠØ¨</div>
    <div class="nav-link" onclick="Game.nav('sc-market', this)">ğŸ›’ Ø§Ù„Ø³ÙˆÙ‚</div>
    <div class="nav-link" onclick="Game.nav('sc-league', this)">ğŸ† Ø§Ù„Ø¯ÙˆØ±ÙŠ</div>
</div>

<script>
const Game = {
    mode: '', name: '', club: '', money: 0, trust: 80, energy: 100, ovr: 70, week: 1, 
    opponent: '', currentOffer: null, leagueData: [],
    allTeams: {
        ENG: ["Ù…Ø§Ù†Ø´Ø³ØªØ± Ø³ÙŠØªÙŠ", "Ù„ÙŠÙØ±Ø¨ÙˆÙ„", "Ø¢Ø±Ø³Ù†Ø§Ù„", "ØªØ´ÙŠÙ„Ø³ÙŠ", "ØªÙˆØªÙ†Ù‡Ø§Ù…", "Ù…Ø§Ù† ÙŠÙˆÙ†Ø§ÙŠØªØ¯", "Ù†ÙŠÙˆÙƒØ§Ø³Ù„", "Ø£Ø³ØªÙˆÙ† ÙÙŠÙ„Ø§", "Ø¨Ø±Ø§ÙŠØªÙˆÙ†", "ÙˆØ³Øª Ù‡Ø§Ù…", "ÙˆÙˆÙ„ÙØ²", "ÙÙˆÙ„Ù‡Ø§Ù…", "Ø¥ÙŠÙØ±ØªÙˆÙ†", "Ø¨Ø±ÙŠÙ†ØªÙÙˆØ±Ø¯", "Ø¨ÙˆØ±Ù†Ù…ÙˆØ«", "ÙƒØ±ÙŠØ³ØªØ§Ù„ Ø¨Ø§Ù„Ø§Ø³", "Ù†ÙˆØªÙŠÙ†ØºÙ‡Ø§Ù…", "Ù„ÙˆØªÙˆÙ†", "Ø¨ÙŠØ±Ù†Ù„ÙŠ", "Ø´ÙŠÙÙŠÙ„Ø¯"],
        ESP: ["Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯", "Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©", "Ø£ØªÙ„ØªÙŠÙƒÙˆ Ù…Ø¯Ø±ÙŠØ¯", "Ø¬ÙŠØ±ÙˆÙ†Ø§", "Ø¨ÙŠÙ„Ø¨Ø§Ùˆ", "Ø³ÙˆØ³ÙŠØ¯Ø§Ø¯", "Ø¨ÙŠØªÙŠØ³", "ÙÙŠØ§Ø±ÙŠØ§Ù„", "ÙØ§Ù„Ù†Ø³ÙŠØ§", "Ø¥Ø´Ø¨ÙŠÙ„ÙŠØ©", "Ø£ÙˆØ³Ø§Ø³ÙˆÙ†Ø§", "Ø®ÙŠØªØ§ÙÙŠ", "Ù„Ø§Ø³ Ø¨Ø§Ù„Ù…Ø§Ø³", "Ø£Ù„Ø§ÙÙŠØ³", "Ù…Ø§ÙŠÙˆØ±ÙƒØ§", "Ø±Ø§ÙŠÙˆ", "Ø³ÙŠÙ„ØªØ§", "Ù‚Ø§Ø¯Ø´", "ØºØ±Ù†Ø§Ø·Ø©", "Ø£Ù„Ù…ÙŠØ±ÙŠØ§"],
        GER: ["Ø¨Ø§ÙŠØ±Ù† Ù…ÙŠÙˆÙ†Ø®", "Ù„ÙŠÙØ±ÙƒÙˆØ²Ù†", "Ø¯ÙˆØ±ØªÙ…ÙˆÙ†Ø¯", "Ù„Ø§ÙŠØ¨Ø²ÙŠØº", "Ø´ØªÙˆØªØºØ§Ø±Øª", "ÙØ±Ø§Ù†ÙƒÙÙˆØ±Øª", "Ù‡ÙˆÙÙ†Ù‡Ø§ÙŠÙ…", "ÙØ±Ø§ÙŠØ¨ÙˆØ±Øº", "Ø¨Ø±ÙŠÙ…Ù†", "Ø£ÙˆØ¬Ø³Ø¨ÙˆØ±Ø¬", "ÙÙˆÙ„ÙØ³Ø¨ÙˆØ±Ø¬", "ØºÙ„Ø§Ø¯Ø¨Ø§Ø®", "ÙŠÙˆÙ†ÙŠÙˆÙ† Ø¨Ø±Ù„ÙŠÙ†", "Ø¨ÙˆØ®ÙˆÙ…", "Ù…Ø§ÙŠÙ†Ø²", "ÙƒÙˆÙ„Ù†", "Ø¯Ø§Ø±Ù…Ø´ØªØ§Øª", "Ù‡Ø§ÙŠØ¯Ù†Ù‡Ø§ÙŠÙ…", "Ø´Ø§Ù„ÙƒÙ‡", "Ù‡Ø§Ù…Ø¨ÙˆØ±Øº"],
        ITA: ["Ø¥Ù†ØªØ±", "Ù…ÙŠÙ„Ø§Ù†", "ÙŠÙˆÙÙ†ØªÙˆØ³", "Ø±ÙˆÙ…Ø§", "Ø£ØªØ§Ù„Ø§Ù†ØªØ§", "Ù„Ø§ØªØ³ÙŠÙˆ", "Ù†Ø§Ø¨ÙˆÙ„ÙŠ", "ÙÙŠÙˆØ±Ù†ØªÙŠÙ†Ø§", "ØªÙˆØ±ÙŠÙ†Ùˆ", "Ù…ÙˆÙ†Ø²Ø§", "Ø¬Ù†ÙˆÙ‰", "Ù„ÙŠØªØ´ÙŠ", "Ø£ÙˆØ¯ÙŠÙ†ÙŠØ²ÙŠ", "ÙÙŠØ±ÙˆÙ†Ø§", "Ø¥Ù…Ø¨ÙˆÙ„ÙŠ", "Ø³Ø§Ø³ÙˆÙ„Ùˆ", "ÙØ±ÙˆØ³ÙŠÙ†ÙˆÙ†ÙŠ", "ÙƒØ§Ù„ÙŠØ§Ø±ÙŠ", "Ø³Ø§Ù„ÙŠØ±Ù†ÙŠØªØ§Ù†Ø§", "Ø¨Ø§Ù„ÙŠØ±Ù…Ùˆ"],
        FRA: ["Ø¨Ø§Ø±ÙŠØ³", "Ù…ÙˆÙ†Ø§ÙƒÙˆ", "Ù„ÙŠÙ„", "Ù†ÙŠØ³", "Ù„Ø§Ù†Ø³", "Ù„ÙŠÙˆÙ†", "Ù…Ø§Ø±Ø³ÙŠÙ„ÙŠØ§", "Ø±ÙŠÙ†", "Ø±ÙŠÙ…Ø³", "ØªÙˆÙ„ÙˆØ²", "Ù…ÙˆÙ†Ø¨Ù„ÙŠÙŠÙ‡", "Ø³ØªØ±Ø§Ø³Ø¨ÙˆØ±Øº", "Ù„ÙˆÙ‡Ø§ÙØ±", "Ù†Ø§Ù†Øª", "Ù…ÙŠØªØ²", "Ù„ÙˆØ±ÙŠØ§Ù†", "ÙƒÙ„ÙŠØ±Ù…ÙˆÙ†Øª", "Ø¨ÙˆØ±Ø¯Ùˆ", "Ø³Ø§Ù†Øª Ø¥ÙŠØªÙŠØ§Ù†"]
    },
    playersDB: [
        {n: "Ù‡Ø§Ù„Ø§Ù†Ø¯", p: 200, img: "https://img.a.transfermarkt.technology/portrait/header/502023-1665067742.jpg?lm=1"},
        {n: "Ù…Ø¨Ø§Ø¨ÙŠ", p: 180, img: "https://img.a.transfermarkt.technology/portrait/header/342229-1632681436.jpg?lm=1"},
        {n: "ØµÙ„Ø§Ø­", p: 150, img: "https://img.a.transfermarkt.technology/portrait/header/148455-1546611451.jpg?lm=1"}
    ],

    showSetup() { document.getElementById('intro-screen').style.display='none'; document.getElementById('setup-screen').style.display='flex'; },
    
    loadTeams() {
        const lKey = document.getElementById('select-league').value;
        const s = document.getElementById('select-team');
        s.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ±ÙŠÙ‚</option>';
        if(lKey && this.allTeams[lKey]) {
            this.allTeams[lKey].forEach(t => { s.innerHTML += `<option value="${t}">${t}</option>`; });
        }
    },

    start() {
        this.mode = document.getElementById('select-mode').value;
        this.name = document.getElementById('user-name').value || "Lassiri";
        this.club = document.getElementById('select-team').value;
        const lKey = document.getElementById('select-league').value;
        if(!this.club || !lKey) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¯ÙˆØ±ÙŠ ÙˆØ§Ù„ÙØ±ÙŠÙ‚!");

        this.money = (this.mode === 'manager') ? 300 : 500;
        this.leagueData = this.allTeams[lKey].map(t => ({name: t, pts: 0}));
        
        document.getElementById('setup-screen').style.display = 'none';
        document.getElementById('mgr-tools').style.display = (this.mode === 'manager') ? 'block' : 'none';
        document.getElementById('nav-train').style.display = (this.mode === 'player') ? 'flex' : 'none';
        
        this.pickOpponent();
        this.updateUI();
        this.renderLeague();
        this.renderMarket();
    },

    pickOpponent() {
        let others = this.leagueData.filter(t => t.name !== this.club);
        this.opponent = others[Math.floor(Math.random() * others.length)].name;
        document.getElementById('ui-opponent').innerText = this.opponent;
    },

    updateUI() {
        document.getElementById('ui-id').innerText = (this.mode === 'player') ? this.name : this.club;
        document.getElementById('ui-money').innerText = this.money + (this.mode === 'manager' ? "M" : "$");
        document.getElementById('ui-trust').innerText = (this.mode === 'player') ? this.energy + "%" : this.trust + "%";
        document.getElementById('ui-ovr').innerText = this.ovr.toFixed(1);
        document.getElementById('ui-status-desc').innerText = "Ø§Ù„Ø¬ÙˆÙ„Ø© " + this.week + " | " + this.club;
    },

    playMatch() {
        document.getElementById('match-screen').style.display = 'flex';
        document.getElementById('m-home').innerText = this.club;
        document.getElementById('m-away').innerText = this.opponent;
        let min = 0, h = 0, a = 0;
        let loop = setInterval(() => {
            min++;
            document.getElementById('m-timer').innerText = min + "'";
            if(Math.random() > 0.95) {
                if(Math.random() > 0.55) h++; else a++;
                document.getElementById('m-score').innerText = h + " - " + a;
            }
            if(min >= 90) { 
                clearInterval(loop); 
                document.getElementById('close-match').style.display = 'block'; 
                this.finalize(h, a); 
            }
        }, 30);
    },

    finalize(h, a) {
        let myTeam = this.leagueData.find(t => t.name === this.club);
        if(h > a) { myTeam.pts += 3; this.money += (this.mode==='manager'?15:200); }
        else if(h === a) { myTeam.pts += 1; }
        this.energy = Math.max(0, this.energy - 35);
    },

    showRecap() {
        let html = "";
        let others = this.leagueData.filter(t => t.name !== this.club && t.name !== this.opponent);
        for(let i=0; i<4; i++) {
            let t1 = others[i].name, t2 = others[others.length-1-i].name;
            let s1 = Math.floor(Math.random()*3), s2 = Math.floor(Math.random()*3);
            this.leagueData.find(t => t.name === t1).pts += (s1 > s2 ? 3 : (s1===s2?1:0));
            this.leagueData.find(t => t.name === t2).pts += (s2 > s1 ? 3 : (s1===s2?1:0));
            html += `<div class="recap-item"><span>${t1}</span> <b>${s1} - ${s2}</b> <span>${t2}</span></div>`;
        }
        document.getElementById('recap-list').innerHTML = html;
        document.getElementById('recap-screen').style.display = 'flex';
        document.getElementById('match-screen').style.display = 'none';
    },

    closeRecap() {
        this.week++;
        document.getElementById('recap-screen').style.display = 'none';
        document.getElementById('close-match').style.display = 'none';
        document.getElementById('m-score').innerText = "0 - 0";
        this.pickOpponent();
        this.updateUI();
        this.renderLeague();
        this.checkOffers();
    },

    checkOffers() {
        if(this.mode === 'player' && this.week % 6 === 0 && this.ovr > 78) {
            const giants = ["Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯", "Ù„ÙŠÙØ±Ø¨ÙˆÙ„", "Ø¨Ø§ÙŠØ±Ù† Ù…ÙŠÙˆÙ†Ø®", "Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©"];
            this.currentOffer = giants[Math.floor(Math.random() * giants.length)];
            document.getElementById('offer-text').innerText = `ÙˆØµÙ„Ùƒ Ø¹Ø±Ø¶ Ø§Ø­ØªØ±Ø§Ù Ù…Ù† Ù†Ø§Ø¯Ù‰ ${this.currentOffer}! Ù‡Ù„ ØªÙ‚Ø¨Ù„ØŸ`;
            document.getElementById('offer-screen').style.display = 'flex';
        }
    },

    acceptOffer() { this.club = this.currentOffer; document.getElementById('offer-screen').style.display = 'none'; this.updateUI(); },
    rejectOffer() { document.getElementById('offer-screen').style.display = 'none'; },

    renderMarket() {
        let html = "";
        if(this.mode === 'manager') {
            this.playersDB.forEach((p, i) => {
                html += `<div class="player-card"><img src="${p.img}" class="player-img"><div><b>${p.n}</b><br>${p.p}M</div><button class="btn-gold" onclick="Game.buyP(${i})">Ø´Ø±Ø§Ø¡</button></div>`;
            });
        }
        document.getElementById('market-list').innerHTML = html || "<p>ØªØ£Ù„Ù‚ ÙÙŠ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ù„ØªØµÙ„ Ù„Ù„Ø¹Ø§Ù„Ù…ÙŠØ©!</p>";
    },

    buyP(i) { if(this.money >= this.playersDB[i].p) { this.money -= this.playersDB[i].p; alert("ØªÙ…Øª Ø§Ù„ØµÙÙ‚Ø©!"); this.updateUI(); } },

    renderLeague() {
        let sorted = [...this.leagueData].sort((a,b) => b.pts - a.pts);
        let h = "<tr><th>#</th><th>Ø§Ù„ÙØ±ÙŠÙ‚</th><th>PTS</th></tr>";
        sorted.forEach((t, i) => h += `<tr style="${t.name===this.club?'color:var(--gold)':''}"><td>${i+1}</td><td>${t.name}</td><td>${t.pts}</td></tr>`);
        document.getElementById('league-table').innerHTML = h;
    },

    nav(id, el) {
        document.querySelectorAll('.screen').forEach(s => s.style.display='none');
        document.getElementById(id).style.display='block';
        document.querySelectorAll('.nav-link').forEach(n => n.classList.remove('active-link'));
        el.classList.add('active-link');
    },

    train(c, g) { if(this.energy >= c) { this.energy -= c; this.ovr += g; this.updateUI(); } else alert("Ø§Ù„Ø·Ø§Ù‚Ø© Ù…Ù†Ø®ÙØ¶Ø©!"); },
    eat() { if(this.money >= 100){ this.money -= 100; this.energy = 100; this.updateUI(); } }
};
</script>
</body>
</html>
